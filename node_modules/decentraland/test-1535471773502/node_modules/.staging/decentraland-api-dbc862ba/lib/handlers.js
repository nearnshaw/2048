"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function createUUID() {
    const s = [];
    const hexDigits = '0123456789abcdef';
    for (let i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
    }
    s[14] = '4';
    s[19] = hexDigits.substr((parseInt(s[19], 10) & 0x3) | 0x8, 1);
    s[8] = s[13] = s[18] = s[23] = '-';
    let uuid = s.join('');
    return uuid;
}
// This symbol is used to store an ID in the function
const idSymbol = Symbol('id');
function putHandler(fn) {
    if (fn[idSymbol]) {
        const id = fn[idSymbol];
        if (id) {
            return id;
        }
    }
    const id = createUUID();
    fn[idSymbol] = id;
    return id;
}
exports.putHandler = putHandler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGFuZGxlcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaGFuZGxlcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxTQUFTLFVBQVU7SUFDakIsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFBO0lBQ1osTUFBTSxTQUFTLEdBQUcsa0JBQWtCLENBQUE7SUFDcEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUMzQixDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtLQUM3RDtJQUNELENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUE7SUFDWCxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBQzlELENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUE7SUFFbEMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUNyQixPQUFPLElBQUksQ0FBQTtBQUNiLENBQUM7QUFFRCxxREFBcUQ7QUFDckQsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFBO0FBRTdCLFNBQWdCLFVBQVUsQ0FBQyxFQUFPO0lBQ2hDLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1FBQ2hCLE1BQU0sRUFBRSxHQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUMvQixJQUFJLEVBQUUsRUFBRTtZQUNOLE9BQU8sRUFBRSxDQUFBO1NBQ1Y7S0FDRjtJQUVELE1BQU0sRUFBRSxHQUFHLFVBQVUsRUFBRSxDQUFBO0lBRXZCLEVBQUUsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUE7SUFFakIsT0FBTyxFQUFFLENBQUE7QUFDWCxDQUFDO0FBYkQsZ0NBYUMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBjcmVhdGVVVUlEKCk6IHN0cmluZyB7XG4gIGNvbnN0IHMgPSBbXVxuICBjb25zdCBoZXhEaWdpdHMgPSAnMDEyMzQ1Njc4OWFiY2RlZidcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAzNjsgaSsrKSB7XG4gICAgc1tpXSA9IGhleERpZ2l0cy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMHgxMCksIDEpXG4gIH1cbiAgc1sxNF0gPSAnNCdcbiAgc1sxOV0gPSBoZXhEaWdpdHMuc3Vic3RyKChwYXJzZUludChzWzE5XSwgMTApICYgMHgzKSB8IDB4OCwgMSlcbiAgc1s4XSA9IHNbMTNdID0gc1sxOF0gPSBzWzIzXSA9ICctJ1xuXG4gIGxldCB1dWlkID0gcy5qb2luKCcnKVxuICByZXR1cm4gdXVpZFxufVxuXG4vLyBUaGlzIHN5bWJvbCBpcyB1c2VkIHRvIHN0b3JlIGFuIElEIGluIHRoZSBmdW5jdGlvblxuY29uc3QgaWRTeW1ib2wgPSBTeW1ib2woJ2lkJylcblxuZXhwb3J0IGZ1bmN0aW9uIHB1dEhhbmRsZXIoZm46IGFueSk6IHN0cmluZyB7XG4gIGlmIChmbltpZFN5bWJvbF0pIHtcbiAgICBjb25zdCBpZDogc3RyaW5nID0gZm5baWRTeW1ib2xdXG4gICAgaWYgKGlkKSB7XG4gICAgICByZXR1cm4gaWRcbiAgICB9XG4gIH1cblxuICBjb25zdCBpZCA9IGNyZWF0ZVVVSUQoKVxuXG4gIGZuW2lkU3ltYm9sXSA9IGlkXG5cbiAgcmV0dXJuIGlkXG59XG4iXX0=