{"code":"!function(t,e){for(var r in e)t[r]=e[r]}(this,function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=28)}([function(t,e,r){var n=e.global=r(31),i=e.hasBuffer=n&&!!n.isBuffer,o=e.hasArrayBuffer=\"undefined\"!=typeof ArrayBuffer,s=e.isArray=r(4);e.isArrayBuffer=o?function(t){return t instanceof ArrayBuffer||p(t)}:g;var f=e.isBuffer=i?n.isBuffer:g,u=e.isView=o?ArrayBuffer.isView||v(\"ArrayBuffer\",\"buffer\"):g;e.alloc=d,e.concat=function(t,r){r||(r=0,Array.prototype.forEach.call(t,function(t){r+=t.length}));var n=this!==e&&this||t[0],i=d.call(n,r),o=0;return Array.prototype.forEach.call(t,function(t){o+=l.copy.call(t,i,o)}),i},e.from=function(t){return\"string\"==typeof t?function(t){var e=3*t.length,r=d.call(this,e),n=l.write.call(r,t);e!==n&&(r=l.slice.call(r,0,n));return r}.call(this,t):y(this).from(t)};var a=e.Array=r(32),c=e.Buffer=r(33),h=e.Uint8Array=r(34),l=e.prototype=r(12);function d(t){return y(this).alloc(t)}var p=v(\"ArrayBuffer\");function y(t){return f(t)?c:u(t)?h:s(t)?a:i?c:o?h:a}function g(){return!1}function v(t,e){return t=\"[object \"+t+\"]\",function(r){return null!=r&&{}.toString.call(e?r[e]:r)===t}}},function(t,e,r){\"use strict\";r.r(e),r.d(e,\"EventDispatcherBinding\",function(){return i}),r.d(e,\"EventDispatcher\",function(){return s});const n=/\\s+/g;class i{constructor(t,e,r,n,i){this.id=t,this.cb=e,this.event=r,this.sharedList=n,this.object=i,this.enabled=!0}off(){this.object&&(this.cb&&this.object.off(this),this.cb=null,this.object=null,this.sharedList&&delete this.sharedList)}enable(){if(this.sharedList)for(let t=0;t<this.sharedList.length;t++)this.sharedList[t].enabled=!0;else this.enabled=!0}disable(){if(this.sharedList)for(let t=0;t<this.sharedList.length;t++)this.sharedList[t].enabled=!1;else this.enabled=!1}}function o(t){delete t.cb}class s{constructor(){this.edBindings={},this.edBindCount=0}on(t,e,r){this.edBindCount++;let o=t.split(n),s=[],f=null;for(let t of o){let n=new i(this.edBindCount,null,t,s,this);s&&s.push(n),n.cb=r?function(){e.apply(this,arguments),n.cb=null}.bind(this):e.bind(this),this.edBindings[t]=this.edBindings[t]||[],this.edBindings[t].push(n),f=n}return f}once(t,e){return this.on(t,e,!0)}off(t,e){if(0===arguments.length)for(let t in this.edBindings){for(let e in this.edBindings[t])delete this.edBindings[t][e].cb;this.edBindings[t].length=0}else if(t instanceof i)t.cb=null,t.sharedList&&t.sharedList.length&&t.sharedList.forEach(o);else if(\"string\"==typeof t)if(\"function\"==typeof e)for(let r in this.edBindings[t])this.edBindings[t][r].cb===e&&(this.edBindings[t][r].cb=null);else\"string\"==typeof t&&(this.edBindings[t]=[]);else if(\"function\"==typeof t)for(let e in this.edBindings)for(let r in this.edBindings[e])this.edBindings[e][r].cb===t&&(this.edBindings[e][r].cb=null)}emit(t){if(t in this.edBindings){if(1===arguments.length)for(let e=0;e<this.edBindings[t].length;e++){let r=this.edBindings[t][e];r&&r.cb&&r.enabled&&r.cb()}else if(2===arguments.length)for(let e=0;e<this.edBindings[t].length;e++){let r=this.edBindings[t][e];r&&r.cb&&r.enabled&&r.cb(arguments[1])}else if(3===arguments.length)for(let e=0;e<this.edBindings[t].length;e++){let r=this.edBindings[t][e];r&&r.cb&&r.enabled&&r.cb(arguments[1],arguments[2])}else if(4===arguments.length)for(let e=0;e<this.edBindings[t].length;e++){let r=this.edBindings[t][e];r&&r.cb&&r.enabled&&r.cb(arguments[1],arguments[2],arguments[3])}else if(5===arguments.length)for(let e=0;e<this.edBindings[t].length;e++){let r=this.edBindings[t][e];r&&r.cb&&r.enabled&&r.cb(arguments[1],arguments[2],arguments[3],arguments[4])}else if(arguments.length>4){let e=Array.prototype.slice.call(arguments,1);for(let r=0;r<this.edBindings[t].length;r++){let n=this.edBindings[t][r];n&&n.cb&&n.enabled&&n.cb.apply(this,e)}}}else if(\"error\"===t){const t=arguments[1];let e=null;throw e=t instanceof Error?t:Object.assign(new Error('EventDispatcher: Unhandled \"error\" event'),{data:arguments}),console.error(e),console.trace(arguments),e}}getEventBindings(t){return(this.edBindings[t]||[]).filter(t=>t&&t.enabled)}}},function(t,e,r){\"use strict\";(function(t){function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,\"__esModule\",{value:!0}),n(r(26)),n(r(3)),n(r(15)),n(r(1)),n(r(25)),n(r(45)),n(r(46));const i=r(47);e.ScriptableScene=i.ScriptableScene;const o=r(50);e.createElement=o.createElement,void 0!==t?t.createElement=t.createElement||o.createElement:\"undefined\"!=typeof window&&(window.createElement=window.createElement||o.createElement)}).call(this,r(16))},function(t,e,r){\"use strict\";function n(t){return{onConnect(e){t.addEventListener(\"message\",()=>e(),{once:!0})},onError(e){t.addEventListener(\"error\",t=>{t.error?e(t.error):t.message&&e(Object.assign(new Error(t.message),{colno:t.colno,error:t.error,filename:t.filename,lineno:t.lineno,message:t.message}))})},onMessage(e){t.addEventListener(\"message\",t=>{e(t.data)})},sendMessage(e){t.postMessage(e)},close(){\"terminate\"in t?t.terminate():\"close\"in t&&t.close()}}}r.r(e),r.d(e,\"WebWorkerTransport\",function(){return n})},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==r.call(t)}},function(t,e,r){var n=r(4);e.createCodec=f,e.install=function(t){for(var e in t)o.prototype[e]=s(o.prototype[e],t[e])},e.filter=function(t){return n(t)?function(t){return t=t.slice(),function(r){return t.reduce(e,r)};function e(t,e){return e(t)}}(t):t};var i=r(0);function o(t){if(!(this instanceof o))return new o(t);this.options=t,this.init()}function s(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function f(t){return new o(t)}o.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=i.Uint8Array),this},e.preset=f({preset:!0})},function(t,e,r){e.encode=r(17).encode,e.decode=r(21).decode,e.Encoder=r(41).Encoder,e.Decoder=r(42).Decoder,e.createCodec=r(43).createCodec,e.codec=r(44).codec},function(t,e){var r=function(t){for(var e=t.length,r=t[0].length,n=[],i=0;i<e;++i){n.push([]);for(var o=0;o<r;++o)n[i][o]=t[o][r-i-1]}return n},n=function(t,e,r){this.value=t||0,this.row=e||-1,this.column=r||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=n.id++};n.id=0,n.prototype.moveTo=function(t,e){this.oldRow=this.row,this.oldColumn=this.column,this.row=t,this.column=e},n.prototype.isNew=function(){return-1==this.oldRow&&!this.mergedInto},n.prototype.hasMoved=function(){return-1!=this.fromRow()&&(this.fromRow()!=this.toRow()||this.fromColumn()!=this.toColumn())||this.mergedInto},n.prototype.fromRow=function(){return this.mergedInto?this.row:this.oldRow},n.prototype.fromColumn=function(){return this.mergedInto?this.column:this.oldColumn},n.prototype.toRow=function(){return this.mergedInto?this.mergedInto.row:this.row},n.prototype.toColumn=function(){return this.mergedInto?this.mergedInto.column:this.column};var i=function(){this.tiles=[],this.cells=[];for(var t=0;t<i.size;++t)this.cells[t]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.setPositions(),this.won=!1};i.prototype.addTile=function(){var t=new n;return n.apply(t,arguments),this.tiles.push(t),t},i.size=4,i.prototype.moveLeft=function(){for(var t=!1,e=0;e<i.size;++e){for(var r=this.cells[e].filter(t=>0!=t.value),n=[],o=0;o<i.size;++o){var s=r.length?r.shift():this.addTile();if(r.length>0&&r[0].value==s.value){var f=s;s=this.addTile(s.value),f.mergedInto=s;var u=r.shift();u.mergedInto=s,s.value+=u.value}n[o]=s,this.won|=2048==s.value,t|=s.value!=this.cells[e][o].value}this.cells[e]=n}return t},i.prototype.setPositions=function(){this.cells.forEach((t,e)=>{t.forEach((t,r)=>{t.oldRow=t.row,t.oldColumn=t.column,t.row=e,t.column=r,t.markForDeletion=!1})})},i.fourProbability=.1,i.prototype.addRandomTile=function(){for(var t=[],e=0;e<i.size;++e)for(var r=0;r<i.size;++r)0==this.cells[e][r].value&&t.push({r:e,c:r});var n=t[~~(Math.random()*t.length)],o=Math.random()<i.fourProbability?4:2;this.cells[n.r][n.c]=this.addTile(o)},i.prototype.move=function(t){this.clearOldTiles();for(var e=0;e<t;++e)this.cells=r(this.cells);var n=this.moveLeft();for(e=t;e<4;++e)this.cells=r(this.cells);return n&&this.addRandomTile(),this.setPositions(),this},i.prototype.clearOldTiles=function(){this.tiles=this.tiles.filter(t=>0==t.markForDeletion),this.tiles.forEach(t=>{t.markForDeletion=!0})},i.prototype.hasWon=function(){return this.won},i.deltaX=[-1,0,1,0],i.deltaY=[0,-1,0,1],i.prototype.hasLost=function(){for(var t=!1,e=0;e<i.size;++e)for(var r=0;r<i.size;++r){t|=0==this.cells[e][r].value;for(var n=0;n<4;++n){var o=e+i.deltaX[n],s=r+i.deltaY[n];o<0||o>=i.size||s<0||s>=i.size||(t|=this.cells[e][r].value==this.cells[o][s].value)}}return!t}},function(t,e,r){\"use strict\";(function(t){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nvar n=r(30),i=r(9),o=r(4);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(t,e){if(s()<e)throw new RangeError(\"Invalid typed array length\");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if(\"number\"==typeof t){if(\"string\"==typeof e)throw new Error(\"If encoding is specified then the first argument must be a string\");return h(this,t)}return a(this,t,e,r)}function a(t,e,r,n){if(\"number\"==typeof e)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError(\"'offset' is out of bounds\");if(e.byteLength<r+(n||0))throw new RangeError(\"'length' is out of bounds\");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=l(t,e);return t}(t,e,r,n):\"string\"==typeof e?function(t,e,r){\"string\"==typeof r&&\"\"!==r||(r=\"utf8\");if(!u.isEncoding(r))throw new TypeError('\"encoding\" must be a valid string encoding');var n=0|p(e,r),i=(t=f(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|d(e.length);return 0===(t=f(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if(\"undefined\"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||\"length\"in e)return\"number\"!=typeof e.length||function(t){return t!=t}(e.length)?f(t,0):l(t,e);if(\"Buffer\"===e.type&&o(e.data))return l(t,e.data)}throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}(t,e)}function c(t){if(\"number\"!=typeof t)throw new TypeError('\"size\" argument must be a number');if(t<0)throw new RangeError('\"size\" argument must not be negative')}function h(t,e){if(c(e),t=f(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function l(t,e){var r=e.length<0?0:0|d(e.length);t=f(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=s())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+s().toString(16)+\" bytes\");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if(\"undefined\"!=typeof ArrayBuffer&&\"function\"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;\"string\"!=typeof t&&(t=\"\"+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case\"ascii\":case\"latin1\":case\"binary\":return r;case\"utf8\":case\"utf-8\":case void 0:return N(t).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*r;case\"hex\":return r>>>1;case\"base64\":return F(t).length;default:if(n)return N(t).length;e=(\"\"+e).toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if(\"string\"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if(\"string\"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if(\"number\"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&\"function\"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError(\"val must be string, number or Buffer\")}function v(t,e,r,n,i){var o,s=1,f=t.length,u=e.length;if(void 0!==n&&(\"ucs2\"===(n=String(n).toLowerCase())||\"ucs-2\"===n||\"utf16le\"===n||\"utf-16le\"===n)){if(t.length<2||e.length<2)return-1;s=2,f/=2,u/=2,r/=2}function a(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=r;o<f;o++)if(a(t,o)===a(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+u>f&&(r=f-u),o=r;o>=0;o--){for(var h=!0,l=0;l<u;l++)if(a(t,o+l)!==a(e,l)){h=!1;break}if(h)return o}return-1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError(\"Invalid hex string\");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var f=parseInt(e.substr(2*s,2),16);if(isNaN(f))return s;t[r+s]=f}return s}function w(t,e,r,n){return z(N(e,t.length-r),t,r,n)}function m(t,e,r,n){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return m(t,e,r,n)}function A(t,e,r,n){return z(F(e),t,r,n)}function B(t,e,r,n){return z(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function _(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,f,u,a=t[i],c=null,h=a>239?4:a>223?3:a>191?2:1;if(i+h<=r)switch(h){case 1:a<128&&(c=a);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&a)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&a)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],f=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&f)&&(u=(15&a)<<18|(63&o)<<12|(63&s)<<6|63&f)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);var r=\"\",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&\"function\"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return a(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,\"undefined\"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?f(t,e):void 0!==r?\"string\"==typeof n?f(t,e).fill(r,n):f(t,e).fill(r):f(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError(\"Arguments must be Buffers\");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!u.isBuffer(s))throw new TypeError('\"list\" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?\"\":0===arguments.length?_(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return\"\";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return\"\";if((r>>>=0)<=(e>>>=0))return\"\";for(t||(t=\"utf8\");;)switch(t){case\"hex\":return S(this,e,r);case\"utf8\":case\"utf-8\":return _(this,e,r);case\"ascii\":return U(this,e,r);case\"latin1\":case\"binary\":return R(this,e,r);case\"base64\":return P(this,e,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return T(this,e,r);default:if(n)throw new TypeError(\"Unknown encoding: \"+t);t=(t+\"\").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t=\"\",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString(\"hex\",0,r).match(/.{2}/g).join(\" \"),this.length>r&&(t+=\" ... \")),\"<Buffer \"+t+\">\"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError(\"out of range index\");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,s=r-e,f=Math.min(o,s),a=this.slice(n,i),c=t.slice(e,r),h=0;h<f;++h)if(a[h]!==c[h]){o=a[h],s=c[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n=\"utf8\",r=this.length,e=0;else if(void 0===r&&\"string\"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");e|=0,isFinite(r)?(r|=0,void 0===n&&(n=\"utf8\")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");n||(n=\"utf8\");for(var o=!1;;)switch(n){case\"hex\":return b(this,t,e,r);case\"utf8\":case\"utf-8\":return w(this,t,e,r);case\"ascii\":return m(this,t,e,r);case\"latin1\":case\"binary\":return E(this,t,e,r);case\"base64\":return A(this,t,e,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return B(this,t,e,r);default:if(o)throw new TypeError(\"Unknown encoding: \"+n);n=(\"\"+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function U(t,e,r){var n=\"\";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){var n=\"\";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function S(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i=\"\",o=e;o<r;++o)i+=Y(t[o]);return i}function T(t,e,r){for(var n=t.slice(e,r),i=\"\",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(t,e,r){if(t%1!=0||t<0)throw new RangeError(\"offset is not uint\");if(t+e>r)throw new RangeError(\"Trying to access beyond buffer length\")}function k(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('\"value\" argument is out of bounds');if(r+n>t.length)throw new RangeError(\"Index out of range\")}function C(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function O(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError(\"Index out of range\");if(r<0)throw new RangeError(\"Index out of range\")}function L(t,e,r,n,o){return o||O(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function D(t,e,r,n,o){return o||O(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=0,s=1,f=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===f&&0!==this[e+o-1]&&(f=1),this[e+o]=(t/s>>0)-f&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=r-1,s=1,f=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===f&&0!==this[e+o+1]&&(f=1),this[e+o]=(t/s>>0)-f&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return D(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return D(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError(\"targetStart out of bounds\");if(r<0||r>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(n<0)throw new RangeError(\"sourceEnd out of bounds\");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if(\"string\"==typeof t){if(\"string\"==typeof e?(n=e,e=0,r=this.length):\"string\"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&\"string\"!=typeof n)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof n&&!u.isEncoding(n))throw new TypeError(\"Unknown encoding: \"+n)}else\"number\"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError(\"Out of range index\");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),\"number\"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=u.isBuffer(t)?t:N(new u(t,n).toString()),f=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%f]}return this};var j=/[^+\\/0-9A-Za-z-_]/g;function Y(t){return t<16?\"0\"+t.toString(16):t.toString(16)}function N(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error(\"Invalid code point\");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function F(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,\"\")}(t).replace(j,\"\")).length<2)return\"\";for(;t.length%4!=0;)t+=\"=\";return t}(t))}function z(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(16))},function(t,e){e.read=function(t,e,r,n,i){var o,s,f=8*i-n-1,u=(1<<f)-1,a=u>>1,c=-7,h=r?i-1:0,l=r?-1:1,d=t[e+h];for(h+=l,o=d&(1<<-c)-1,d>>=-c,c+=f;c>0;o=256*o+t[e+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=l,c-=8);if(0===o)o=1-a;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=a}return(d?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,f,u,a=8*o-i-1,c=(1<<a)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?l/u:l*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(f=0,s=c):s+h>=1?(f=(e*u-1)*Math.pow(2,i),s+=h):(f=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&f,d+=p,f/=256,i-=8);for(s=s<<i|f,a+=i;a>0;t[r+d]=255&s,d+=p,s/=256,a-=8);t[r+d-p]|=128*y}},function(t,e,r){var n=r(11).ExtBuffer,i=r(36),o=r(37),s=r(5);function f(){var t=this.options;return this.encode=function(t){var e=o.getWriteType(t);return function(t,r){var n=e[typeof r];if(!n)throw new Error('Unsupported type \"'+typeof r+'\": '+r);n(t,r)}}(t),t&&t.preset&&i.setExtPackers(this),this}s.install({addExtPacker:function(t,e,r){r=s.filter(r);var i=e.name;if(i&&\"Object\"!==i){var o=this.extPackers||(this.extPackers={});o[i]=u}else{var f=this.extEncoderList||(this.extEncoderList=[]);f.unshift([e,u])}function u(e){return r&&(e=r(e)),new n(e,t)}},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),r=t.constructor,n=r&&r.name&&e[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var f=i[s];if(r===f[0])return f[1]}},init:f}),e.preset=f.call(s.preset)},function(t,e,r){e.ExtBuffer=function t(e,r){if(!(this instanceof t))return new t(e,r);this.buffer=n.from(e);this.type=r};var n=r(0)},function(t,e,r){var n=r(35);e.copy=u,e.slice=a,e.toString=function(t,e,r){return(!s&&i.isBuffer(this)?this.toString:n.toString).apply(this,arguments)},e.write=function(t){return function(){return(this[t]||n[t]).apply(this,arguments)}}(\"write\");var i=r(0),o=i.global,s=i.hasBuffer&&\"TYPED_ARRAY_SUPPORT\"in o,f=s&&!o.TYPED_ARRAY_SUPPORT;function u(t,e,r,o){var s=i.isBuffer(this),u=i.isBuffer(t);if(s&&u)return this.copy(t,e,r,o);if(f||s||u||!i.isView(this)||!i.isView(t))return n.copy.call(this,t,e,r,o);var c=r||null!=o?a.call(this,r,o):this;return t.set(c,e),c.length}function a(t,e){var r=this.slice||!f&&this.subarray;if(r)return r.call(this,t,e);var n=i.alloc.call(this,e-t);return u.call(this,n,0,t,e),n}},function(t,e,r){(function(t){!function(e){var r,n=\"undefined\",i=n!==typeof t&&t,o=n!==typeof Uint8Array&&Uint8Array,s=n!==typeof ArrayBuffer&&ArrayBuffer,f=[0,0,0,0,0,0,0,0],u=Array.isArray||function(t){return!!t&&\"[object Array]\"==Object.prototype.toString.call(t)},a=4294967296,c=16777216;function h(t,u,h){var A=u?0:4,B=u?4:0,P=u?0:3,_=u?1:2,x=u?2:1,U=u?3:0,R=u?b:m,S=u?w:E,T=C.prototype,I=\"is\"+t,k=\"_\"+I;return T.buffer=void 0,T.offset=0,T[k]=!0,T.toNumber=M,T.toString=function(t){var e=this.buffer,r=this.offset,n=L(e,r+A),i=L(e,r+B),o=\"\",s=!h&&2147483648&n;s&&(n=~n,i=a-i);t=t||10;for(;;){var f=n%t*a+i;if(n=Math.floor(n/t),i=Math.floor(f/t),o=(f%t).toString(t)+o,!n&&!i)break}s&&(o=\"-\"+o);return o},T.toJSON=M,T.toArray=l,i&&(T.toBuffer=d),o&&(T.toArrayBuffer=p),C[I]=function(t){return!(!t||!t[k])},e[t]=C,C;function C(t,e,i,u){return this instanceof C?function(t,e,i,u,c){o&&s&&(e instanceof s&&(e=new o(e)),u instanceof s&&(u=new o(u)));if(!(e||i||u||r))return void(t.buffer=v(f,0));if(!y(e,i)){var h=r||Array;c=i,u=e,i=0,e=new h(8)}if(t.buffer=e,t.offset=i|=0,n===typeof u)return;\"string\"==typeof u?function(t,e,r,n){var i=0,o=r.length,s=0,f=0;\"-\"===r[0]&&i++;var u=i;for(;i<o;){var c=parseInt(r[i++],n);if(!(c>=0))break;f=f*n+c,s=s*n+Math.floor(f/a),f%=a}u&&(s=~s,f?f=a-f:s++);O(t,e+A,s),O(t,e+B,f)}(e,i,u,c||10):y(u,c)?g(e,i,u,c):\"number\"==typeof c?(O(e,i+A,u),O(e,i+B,c)):u>0?R(e,i,u):u<0?S(e,i,u):g(e,i,f,0)}(this,t,e,i,u):new C(t,e,i,u)}function M(){var t=this.buffer,e=this.offset,r=L(t,e+A),n=L(t,e+B);return h||(r|=0),r?r*a+n:n}function O(t,e,r){t[e+U]=255&r,r>>=8,t[e+x]=255&r,r>>=8,t[e+_]=255&r,r>>=8,t[e+P]=255&r}function L(t,e){return t[e+P]*c+(t[e+_]<<16)+(t[e+x]<<8)+t[e+U]}}function l(t){var e=this.buffer,n=this.offset;return r=null,!1!==t&&0===n&&8===e.length&&u(e)?e:v(e,n)}function d(e){var n=this.buffer,o=this.offset;if(r=i,!1!==e&&0===o&&8===n.length&&t.isBuffer(n))return n;var s=new i(8);return g(s,0,n,o),s}function p(t){var e=this.buffer,n=this.offset,i=e.buffer;if(r=o,!1!==t&&0===n&&i instanceof s&&8===i.byteLength)return i;var f=new o(8);return g(f,0,e,n),f.buffer}function y(t,e){var r=t&&t.length;return e|=0,r&&e+8<=r&&\"string\"!=typeof t[e]}function g(t,e,r,n){e|=0,n|=0;for(var i=0;i<8;i++)t[e++]=255&r[n++]}function v(t,e){return Array.prototype.slice.call(t,e,e+8)}function b(t,e,r){for(var n=e+8;n>e;)t[--n]=255&r,r/=256}function w(t,e,r){var n=e+8;for(r++;n>e;)t[--n]=255&-r^255,r/=256}function m(t,e,r){for(var n=e+8;e<n;)t[e++]=255&r,r/=256}function E(t,e,r){var n=e+8;for(r++;e<n;)t[e++]=255&-r^255,r/=256}h(\"Uint64BE\",!0,!0),h(\"Int64BE\",!0,!1),h(\"Uint64LE\",!1,!0),h(\"Int64LE\",!1,!1)}(\"object\"==typeof e&&\"string\"!=typeof e.nodeName?e:this||{})}).call(this,r(8).Buffer)},function(t,e,r){var n=r(11).ExtBuffer,i=r(39),o=r(23).readUint8,s=r(40),f=r(5);function u(){var t=this.options;return this.decode=function(t){var e=s.getReadToken(t);return function(t){var r=o(t),n=e[r];if(!n)throw new Error(\"Invalid type: \"+(r?\"0x\"+r.toString(16):r));return n(t)}}(t),t&&t.preset&&i.setExtUnpackers(this),this}f.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=f.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new n(e,t)}},init:u}),e.preset=u.call(f.preset)},function(t,e,r){\"use strict\";function n(t){const e=[];function r(e){\"string\"==typeof e?t.send(e,{binary:!1}):(e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof SharedArrayBuffer)&&(t.binaryType=\"arraybuffer\",t.send(e,{binary:!0}))}return t.addEventListener(\"open\",function(){t.readyState===t.OPEN&&(e.forEach(t=>r(t)),e.length=0)}),{onConnect(e){t.readyState===t.OPEN?e():t.addEventListener(\"open\",()=>e(),{once:!0})},onError(e){t.addEventListener(\"error\",t=>{t.error?e(t.error):t.message&&e(Object.assign(new Error(t.message),{colno:t.colno,error:t.error,filename:t.filename,lineno:t.lineno,message:t.message}))})},onMessage(e){t.addEventListener(\"message\",t=>{e(t.data)})},sendMessage(n){const i=n instanceof Uint8Array?n.buffer:n;t.readyState===t.OPEN?r(i):e.push(i)},close(){t.close()}}}r.r(e),r.d(e,\"WebSocketTransport\",function(){return n})},function(t,e){var r;r=function(){return this}();try{r=r||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"==typeof window&&(r=window)}t.exports=r},function(t,e,r){e.encode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=r(18).EncodeBuffer},function(t,e,r){e.EncodeBuffer=i;var n=r(10).preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r(20).FlexEncoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.write=function(t){this.codec.encode(this,t)}},function(t,e){for(var r=e.uint8=new Array(256),n=0;n<=255;n++)r[n]=i(n);function i(t){return function(e){var r=e.reserve(1);e.buffer[r]=t}}},function(t,e,r){e.FlexDecoder=f,e.FlexEncoder=u;var n=r(0),i=2048,o=65536,s=\"BUFFER_SHORTAGE\";function f(){if(!(this instanceof f))return new f}function u(){if(!(this instanceof u))return new u}function a(){throw new Error(\"method not implemented: write()\")}function c(){throw new Error(\"method not implemented: fetch()\")}function h(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function l(t){(this.buffers||(this.buffers=[])).push(t)}function d(){return(this.buffers||(this.buffers=[])).shift()}function p(t){return function(e){for(var r in t)e[r]=t[r];return e}}f.mixin=p(function(){return{bufferish:n,write:function(t){var e=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:c,flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=s)throw t;this.offset=e;break}this.push(t)}},push:l,pull:d,read:h,reserve:function(t){var e=this.offset,r=e+t;if(r>this.buffer.length)throw new Error(s);return this.offset=r,e},offset:0}}()),f.mixin(f.prototype),u.mixin=p(function(){return{bufferish:n,write:a,fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return n.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:l,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:h,reserve:function(t){var e=0|t;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+e;if(i<r)return this.offset=i,n;this.flush(),t=Math.max(t,Math.min(2*r,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var r=this.reserve(e);n.prototype.copy.call(t,this.buffer,r)}},maxBufferSize:o,minBufferSize:i,offset:0,start:0}}()),u.mixin(u.prototype)},function(t,e,r){e.decode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=r(22).DecodeBuffer},function(t,e,r){e.DecodeBuffer=i;var n=r(14).preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r(20).FlexDecoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.fetch=function(){return this.codec.decode(this)}},function(t,e,r){var n=r(9),i=r(13),o=i.Uint64BE,s=i.Int64BE;e.getReadFormat=function(t){var e=f.hasArrayBuffer&&t&&t.binarraybuffer,r=t&&t.int64;return{map:a&&t&&t.usemap?l:h,array:d,str:p,bin:e?g:y,ext:v,uint8:b,uint16:m,uint32:A,uint64:P(8,r?U:_),int8:w,int16:E,int32:B,int64:P(8,r?R:x),float32:P(4,S),float64:P(8,T)}},e.readUint8=b;var f=r(0),u=r(12),a=\"undefined\"!=typeof Map,c=!0;function h(t,e){var r,n={},i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n[i[r]]=o[r];return n}function l(t,e){var r,n=new Map,i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n.set(i[r],o[r]);return n}function d(t,e){for(var r=new Array(e),n=t.codec.decode,i=0;i<e;i++)r[i]=n(t);return r}function p(t,e){var r=t.reserve(e),n=r+e;return u.toString.call(t.buffer,\"utf-8\",r,n)}function y(t,e){var r=t.reserve(e),n=r+e,i=u.slice.call(t.buffer,r,n);return f.from(i)}function g(t,e){var r=t.reserve(e),n=r+e,i=u.slice.call(t.buffer,r,n);return f.Uint8Array.from(i).buffer}function v(t,e){var r=t.reserve(e+1),n=t.buffer[r++],i=r+e,o=t.codec.getExtUnpacker(n);if(!o)throw new Error(\"Invalid ext type: \"+(n?\"0x\"+n.toString(16):n));return o(u.slice.call(t.buffer,r,i))}function b(t){var e=t.reserve(1);return t.buffer[e]}function w(t){var e=t.reserve(1),r=t.buffer[e];return 128&r?r-256:r}function m(t){var e=t.reserve(2),r=t.buffer;return r[e++]<<8|r[e]}function E(t){var e=t.reserve(2),r=t.buffer,n=r[e++]<<8|r[e];return 32768&n?n-65536:n}function A(t){var e=t.reserve(4),r=t.buffer;return 16777216*r[e++]+(r[e++]<<16)+(r[e++]<<8)+r[e]}function B(t){var e=t.reserve(4),r=t.buffer;return r[e++]<<24|r[e++]<<16|r[e++]<<8|r[e]}function P(t,e){return function(r){var n=r.reserve(t);return e.call(r.buffer,n,c)}}function _(t){return new o(this,t).toNumber()}function x(t){return new s(this,t).toNumber()}function U(t){return new o(this,t)}function R(t){return new s(this,t)}function S(t){return n.read(this,t,!1,23,4)}function T(t){return n.read(this,t,!1,52,8)}},function(t,e,r){!function(e){t.exports=e;var r=\"listeners\",n={on:function(t,e){return s(this,t).push(e),this},once:function(t,e){var r=this;return n.originalListener=e,s(r,t).push(n),r;function n(){o.call(r,t,n),e.apply(this,arguments)}},off:o,emit:function(t,e){var r=this,n=s(r,t,!0);if(!n)return!1;var i=arguments.length;if(1===i)n.forEach(function(t){t.call(r)});else if(2===i)n.forEach(function(t){t.call(r,e)});else{var o=Array.prototype.slice.call(arguments,1);n.forEach(function(t){t.apply(r,o)})}return!!n.length}};function i(t){for(var e in n)t[e]=n[e];return t}function o(t,e){var n;if(arguments.length){if(e){if(n=s(this,t,!0)){if(!(n=n.filter(function(t){return t!==e&&t.originalListener!==e})).length)return o.call(this,t);this[r][t]=n}}else if((n=this[r])&&(delete n[t],!Object.keys(n).length))return o.call(this)}else delete this[r];return this}function s(t,e,n){if(!n||t[r]){var i=t[r]||(t[r]={});return i[e]||(i[e]=[])}}i(e.prototype),e.mixin=i}(\n/**\n * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)\n *\n * @copyright Yusuke Kawasaki\n * @license MIT\n * @constructor\n * @see https://github.com/kawanet/event-lite\n * @see http://kawanet.github.io/event-lite/EventLite.html\n * @example\n * var EventLite = require(\"event-lite\");\n *\n * function MyClass() {...}             // your class\n *\n * EventLite.mixin(MyClass.prototype);  // import event methods\n *\n * var obj = new MyClass();\n * obj.on(\"foo\", function() {...});     // add event listener\n * obj.once(\"bar\", function() {...});   // add one-time event listener\n * obj.emit(\"foo\");                     // dispatch event\n * obj.emit(\"bar\");                     // dispatch another event\n * obj.off(\"foo\");                      // remove event listener\n */\nfunction t(){if(!(this instanceof t))return new t})},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.BillboardModes={BILLBOARDMODE_NONE:0,BILLBOARDMODE_X:1,BILLBOARDMODE_Y:2,BILLBOARDMODE_Z:4,BILLBOARDMODE_ALL:7},e.TextureSamplingMode={NEAREST:1,BILINEAR:2,TRILINEAR:3},e.TextureWrapping={CLAMP:0,WRAP:1,MIRROR:2},e.TransparencyModes={OPAQUE:0,ALPHATEST:1,ALPHABLEND:2,ALPHATESTANDBLEND:3},function(t){t.ReplaceWholeTreeException=\"ReplaceWholeTreeException\"}(e.Constants||(e.Constants={}))},function(t,e,r){\"use strict\";r.r(e);var n=r(27);const i=[\"then\",\"catch\"];const o=\"LoadComponents\",s=\"function\"==typeof Symbol&&Symbol.for?Symbol(\"injectedAPIs\"):65184;function f(t){if(void 0!==t&&!t)throw new TypeError(\"API name cannot be null / empty\");return function(e,r){if(\"string\"!=typeof r)throw new TypeError(\"Cannot inject APIs with non-string names\");u(e).set(r,t||r)}}function u(t){const e=t;return e[s]=e[s]||new Map,e[s]}class a extends n.a{constructor(t,e){super(e),this.transport=t,this.loadedAPIs={},this.started=!1,t.onError&&t.onError(t=>{this.emit(\"error\",t)}),t.onClose&&t.onClose(()=>{this.emit(\"transportClosed\")}),t.onMessage(t=>{this.processMessage(t)}),t.onConnect?t.onConnect(()=>{this.didConnect()}):this.didConnect()}sendMessage(t){this.transport.sendMessage(t)}async loadAPIs(t){const e=Object.keys(this.loadedAPIs),r=t.filter(function(t){return!e.includes(t)});return r.length&&(await this.call(o,[r]),r.forEach(async t=>{this.loadedAPIs[t]=function(t,e=\"\"){if(!Proxy)throw new Error(\"getApi() requires ES6 Proxy. Please use an ES6 compatible engine\");const r=\"\"===e?\"\":`${e}.`;return new Proxy({},{get:(e,n)=>{if(e[n])return e[n];if(\"__proto__\"===n||\"prototype\"===n)return Object.prototype;if(\"on\"===n.substr(0,2)&&n.length>3){const i=n.substr(2);e[n]=(e=>t.on(`${r}${i}`,r=>{try{r&&r instanceof Array?e.apply(null,r):e.call(null,r)}catch(e){t.emit(\"error\",e)}}))}else if(\"emit\"===n.substr(0,4)&&n.length>5){const i=n.substr(4);e[n]=((...e)=>t.notify(`${r}${i}`,e))}else{if(-1!==i.indexOf(n))return;{const i=n;e[n]=((...e)=>t.call(`${r}${i}`,e))}}return e[n]}})}(this,t)})),this.loadedAPIs}didConnect(){const t=async function(t){const e=u(t);0!==e.size&&(await t.loadAPIs(Array.from(e.values())),e.forEach(function(e,r){t[r]=t.loadedAPIs[e]}))}(this);super.didConnect(),t.then(()=>{if(this.systemDidEnable&&!this.started){this.started=!0;try{const t=this.systemDidEnable();t&&function(t){return t&&\"object\"==typeof t&&\"function\"==typeof t.then&&\"function\"==typeof t.catch}(t)&&t.catch(t=>this.emit(\"error\",t))}catch(t){this.emit(\"error\",t)}}}).catch(t=>this.emit(\"error\",t))}}a.inject=f;var c=r(1);class h extends c.EventDispatcher{constructor(t){super(),this.component=t,t.onSubscribedEvent(t=>{super.emit(t.event,t)})}on(t,e){return 0===this.getEventBindings(t).length&&this.component.subscribe(t).catch(t=>this.emit(\"error\",t)),super.on.apply(this,arguments)}off(t){let e=null;const r=super.off.apply(this,arguments);return\"string\"==typeof t?e=t:t instanceof c.EventDispatcherBinding&&(t=t.event),null!==e&&0===this.getEventBindings(e).length&&this.component.unsubscribe(e).catch(t=>this.emit(\"error\",t)),r}}var l=r(3),d=r(15);function p(){const t=new c.EventDispatcher,e=new c.EventDispatcher;function r(t,e){return{sendMessage(t){e.emit(\"message\",t)},close(){e.emit(\"close\")},onMessage(e){t.on(\"message\",e)},onClose(e){t.on(\"close\",e)},onError(e){t.on(\"error\",e)},onConnect(t){setInterval(t,16)}}}return{client:r(t,e),server:r(e,t)}}r.d(e,\"inject\",function(){return f}),r.d(e,\"getInjectedAPIs\",function(){return u}),r.d(e,\"Script\",function(){return a}),r.d(e,\"EventSubscriber\",function(){return h}),r.d(e,\"WebWorkerTransport\",function(){return l.WebWorkerTransport}),r.d(e,\"WebSocketTransport\",function(){return d.WebSocketTransport}),r.d(e,\"MemoryTransport\",function(){return p})},function(t,e,r){\"use strict\";(function(t){r.d(e,\"a\",function(){return s});var n=r(1),i=r(6);const o=Object(i.createCodec)();class s extends n.EventDispatcher{constructor(t){super(),this.sendEncoding=\"JSON\",this._responsePromiseMap=new Map,this._nextMessageId=0,this._consoleLog=!1,this._requestQueue=[],this._connected=!1,this.setLogging(t)}processMessage(e){let r;if(\"string\"==typeof e&&\"{\"===e.charAt(0)){this._logMessage(e,\"receive\");try{r=JSON.parse(e)}catch(t){return this.emit(\"error\",t)}}else r=\"string\"==typeof e||e instanceof Uint8Array||void 0!==t&&e instanceof t||e instanceof Array?Object(i.decode)(e,{codec:o}):e;if(r)if(r.id)if(this._responsePromiseMap.has(r.id)){const t=this._responsePromiseMap.get(r.id);if(this._responsePromiseMap.delete(r.id),\"result\"in r)t.resolve(r.result);else if(\"error\"in r){const e=Object.assign(new Error(\"Remote error\"),r.error,r.error&&r.error.data||{});t.reject(e)}else t.reject(Object.assign(new Error(`Response must have result or error: ${e}`),{code:-32700}))}else this.emit(\"error\",new Error(`Response with id:${r.id} has no pending request`));else r.method?this.emit(r.method,r.params):this.emit(\"error\",new Error(`Invalid message: ${e}`));else this.emit(\"error\",new Error(\"Message cannot be null, empty or undefined\"))}setLogging({logConsole:t}={}){this._consoleLog=!!t}call(t,e){if(void 0!==e&&\"object\"!=typeof e)throw new Error(`Client#call Params must be structured data (Array | Object) got ${JSON.stringify(e)}`);const r=++this._nextMessageId,n={id:r,method:t,params:e,jsonrpc:\"2.0\"};return new Promise((t,e)=>{try{this._responsePromiseMap.set(r,{resolve:t,reject:e}),this._send(n)}catch(t){return e(t)}})}notify(t,e){if(void 0!==e&&\"object\"!=typeof e)throw new Error(`Client#notify Params must be structured data (Array | Object) got ${JSON.stringify(e)}`);this._send({method:t,params:e,jsonrpc:\"2.0\"})}didConnect(){!1===this._connected&&(this._connected=!0,this._sendQueuedRequests())}_send(t){\"msgpack\"===this.sendEncoding?this._requestQueue.push(Object(i.encode)(t,{codec:o})):this._requestQueue.push(JSON.stringify(t)),this._sendQueuedRequests()}_sendQueuedRequests(){if(this._connected){const t=this._requestQueue.splice(0,this._requestQueue.length);for(let e of t)this._logMessage(e,\"send\"),this.sendMessage(e)}}_logMessage(t,e){this._consoleLog&&console.log(`Client ${\"send\"===e?\">\":\"<\"}`,t.toString())}}}).call(this,r(8).Buffer)},function(t,e,r){\"use strict\";r.r(e);var n=r(3);const i=r(29);i&&i.__esModule&&i.default&&new i.default(Object(n.WebWorkerTransport)(self))},function(t,e,r){\"use strict\";r.r(e),r.d(e,\"default\",function(){return s});var n=r(2),i=r(7),o=r.n(i);class s extends n.ScriptableScene{constructor(){super(...arguments),this.state={board:new o.a}}sceneDidMount(){}buttonClick(t){this.setState({board:this.state.board.move(t)})}restartGame(){this.setState({board:new o.a})}renderCells(){return this.state.board.cells.map((t,e)=>n.createElement(\"entity\",{key:e},t.map((t,r)=>n.createElement(\"box\",{key:e*o.a.size+r,position:{x:2*e,y:2*r,z:1}}))))}renderTiles(){return this.state.board.tiles.filter(t=>0!=t.value).map(t=>n.createElement(\"box\",{key:t.id}))}renderButtons(){return n.createElement(\"entity\",null,n.createElement(\"box\",{id:\"button1\",position:{x:3,y:3,z:1},onClick:()=>this.buttonClick(1)}),n.createElement(\"box\",{id:\"button2\",position:{x:3,y:3,z:1},onClick:()=>this.buttonClick(2)}))}async render(){return n.createElement(\"scene\",null,this.renderCells(),this.renderTiles(),this.renderButtons())}}},function(t,e,r){\"use strict\";e.byteLength=function(t){var e=a(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=a(t),n=r[0],s=r[1],f=new o(function(t,e,r){return 3*(e+r)/4-r}(0,n,s)),u=0,c=s>0?n-4:n,h=0;h<c;h+=4)e=i[t.charCodeAt(h)]<<18|i[t.charCodeAt(h+1)]<<12|i[t.charCodeAt(h+2)]<<6|i[t.charCodeAt(h+3)],f[u++]=e>>16&255,f[u++]=e>>8&255,f[u++]=255&e;2===s&&(e=i[t.charCodeAt(h)]<<2|i[t.charCodeAt(h+1)]>>4,f[u++]=255&e);1===s&&(e=i[t.charCodeAt(h)]<<10|i[t.charCodeAt(h+1)]<<4|i[t.charCodeAt(h+2)]>>2,f[u++]=e>>8&255,f[u++]=255&e);return f},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=0,f=r-i;s<f;s+=16383)o.push(h(t,s,s+16383>f?f:s+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+\"==\")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+\"=\"));return o.join(\"\")};for(var n=[],i=[],o=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",f=0,u=s.length;f<u;++f)n[f]=s[f],i[s.charCodeAt(f)]=f;function a(t){var e=t.length;if(e%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var r=t.indexOf(\"=\");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function h(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(c(n));return i.join(\"\")}i[\"-\".charCodeAt(0)]=62,i[\"_\".charCodeAt(0)]=63},function(t,e,r){(function(e){function r(t){return t&&t.isBuffer&&t}t.exports=r(void 0!==e&&e)||r(this.Buffer)||r(\"undefined\"!=typeof window&&window.Buffer)||this.Buffer}).call(this,r(8).Buffer)},function(t,e,r){var n=r(0);function i(t){return new Array(t)}(e=t.exports=i(0)).alloc=i,e.concat=n.concat,e.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if(\"string\"==typeof t)return n.from.call(e,t);if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number')}return Array.prototype.slice.call(t)}},function(t,e,r){var n=r(0),i=n.global;function o(t){return new i(t)}(e=t.exports=n.hasBuffer?o(0):[]).alloc=n.hasBuffer&&i.alloc||o,e.concat=n.concat,e.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if(\"string\"==typeof t)return n.from.call(e,t);if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number')}return i.from&&1!==i.from.length?i.from(t):new i(t)}},function(t,e,r){var n=r(0);function i(t){return new Uint8Array(t)}(e=t.exports=n.hasArrayBuffer?i(0):[]).alloc=i,e.concat=n.concat,e.from=function(t){if(n.isView(t)){var r=t.byteOffset,i=t.byteLength;(t=t.buffer).byteLength!==i&&(t.slice?t=t.slice(r,r+i):(t=new Uint8Array(t)).byteLength!==i&&(t=Array.prototype.slice.call(t,r,r+i)))}else{if(\"string\"==typeof t)return n.from.call(e,t);if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number')}return new Uint8Array(t)}},function(t,e){e.copy=function(t,e,r,n){var i;r||(r=0);n||0===n||(n=this.length);e||(e=0);var o=n-r;if(t===this&&r<e&&e<n)for(i=o-1;i>=0;i--)t[i+e]=this[i+r];else for(i=0;i<o;i++)t[i+e]=this[i+r];return o},e.toString=function(t,e,r){var n=0|e;r||(r=this.length);var i=\"\",o=0;for(;n<r;)(o=this[n++])<128?i+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&this[n++]:224==(240&o)?o=(15&o)<<12|(63&this[n++])<<6|63&this[n++]:240==(248&o)&&(o=(7&o)<<18|(63&this[n++])<<12|(63&this[n++])<<6|63&this[n++]),o>=65536?(o-=65536,i+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):i+=String.fromCharCode(o));return i},e.write=function(t,e){var r=e||(e|=0),n=t.length,i=0,o=0;for(;o<n;)(i=t.charCodeAt(o++))<128?this[r++]=i:i<2048?(this[r++]=192|i>>>6,this[r++]=128|63&i):i<55296||i>57343?(this[r++]=224|i>>>12,this[r++]=128|i>>>6&63,this[r++]=128|63&i):(i=65536+(i-55296<<10|t.charCodeAt(o++)-56320),this[r++]=240|i>>>18,this[r++]=128|i>>>12&63,this[r++]=128|i>>>6&63,this[r++]=128|63&i);return r-e}},function(t,e,r){e.setExtPackers=function(t){t.addExtPacker(14,Error,[h,u]),t.addExtPacker(1,EvalError,[h,u]),t.addExtPacker(2,RangeError,[h,u]),t.addExtPacker(3,ReferenceError,[h,u]),t.addExtPacker(4,SyntaxError,[h,u]),t.addExtPacker(5,TypeError,[h,u]),t.addExtPacker(6,URIError,[h,u]),t.addExtPacker(10,RegExp,[c,u]),t.addExtPacker(11,Boolean,[a,u]),t.addExtPacker(12,String,[a,u]),t.addExtPacker(13,Date,[Number,u]),t.addExtPacker(15,Number,[a,u]),\"undefined\"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,s),t.addExtPacker(18,Uint8Array,s),t.addExtPacker(19,Int16Array,s),t.addExtPacker(20,Uint16Array,s),t.addExtPacker(21,Int32Array,s),t.addExtPacker(22,Uint32Array,s),t.addExtPacker(23,Float32Array,s),\"undefined\"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,s),\"undefined\"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,s),t.addExtPacker(26,ArrayBuffer,s),t.addExtPacker(29,DataView,s));i.hasBuffer&&t.addExtPacker(27,o,i.from)};var n,i=r(0),o=i.global,s=i.Uint8Array.from,f={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function u(t){return n||(n=r(17).encode),n(t)}function a(t){return t.valueOf()}function c(t){(t=RegExp.prototype.toString.call(t).split(\"/\")).shift();var e=[t.pop()];return e.unshift(t.join(\"/\")),e}function h(t){var e={};for(var r in f)e[r]=t[r];return e}},function(t,e,r){var n=r(4),i=r(13),o=i.Uint64BE,s=i.Int64BE,f=r(0),u=r(12),a=r(38),c=r(19).uint8,h=r(11).ExtBuffer,l=\"undefined\"!=typeof Uint8Array,d=\"undefined\"!=typeof Map,p=[];p[1]=212,p[2]=213,p[4]=214,p[8]=215,p[16]=216,e.getWriteType=function(t){var e=a.getWriteToken(t),r=t&&t.useraw,i=l&&t&&t.binarraybuffer,y=i?f.isArrayBuffer:f.isBuffer,g=i?function(t,e){m(t,new Uint8Array(e))}:m,v=d&&t&&t.usemap?function(t,r){if(!(r instanceof Map))return E(t,r);var n=r.size;e[n<16?128+n:n<=65535?222:223](t,n);var i=t.codec.encode;r.forEach(function(e,r,n){i(t,r),i(t,e)})}:E;return{boolean:function(t,r){e[r?195:194](t,r)},function:w,number:function(t,r){var n,i=0|r;if(r!==i)return void e[n=203](t,r);n=-32<=i&&i<=127?255&i:0<=i?i<=255?204:i<=65535?205:206:-128<=i?208:-32768<=i?209:210;e[n](t,i)},object:r?function(t,r){if(y(r))return function(t,r){var n=r.length;e[n<32?160+n:n<=65535?218:219](t,n),t.send(r)}(t,r);b(t,r)}:b,string:function(t){return function(r,n){var i=n.length,o=5+3*i;r.offset=r.reserve(o);var s=r.buffer,f=t(i),a=r.offset+f;i=u.write.call(s,n,a);var c=t(i);if(f!==c){var h=a+c-f,l=a+i;u.copy.call(s,s,h,a,l)}e[1===c?160+i:c<=3?215+c:219](r,i),r.offset+=i}}(r?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5}),symbol:w,undefined:w};function b(t,r){if(null===r)return w(t,r);if(y(r))return g(t,r);if(n(r))return function(t,r){var n=r.length;e[n<16?144+n:n<=65535?220:221](t,n);for(var i=t.codec.encode,o=0;o<n;o++)i(t,r[o])}(t,r);if(o.isUint64BE(r))return function(t,r){e[207](t,r.toArray())}(t,r);if(s.isInt64BE(r))return function(t,r){e[211](t,r.toArray())}(t,r);var i=t.codec.getExtPacker(r);if(i&&(r=i(r)),r instanceof h)return function(t,r){var n=r.buffer,i=n.length,o=p[i]||(i<255?199:i<=65535?200:201);e[o](t,i),c[r.type](t),t.send(n)}(t,r);v(t,r)}function w(t,r){e[192](t,r)}function m(t,r){var n=r.length,i=n<255?196:n<=65535?197:198;e[i](t,n),t.send(r)}function E(t,r){var n=Object.keys(r),i=n.length,o=i<16?128+i:i<=65535?222:223;e[o](t,i);var s=t.codec.encode;n.forEach(function(e){s(t,e),s(t,r[e])})}}},function(t,e,r){var n=r(9),i=r(13),o=i.Uint64BE,s=i.Int64BE,f=r(19).uint8,u=r(0),a=u.global,c=u.hasBuffer&&\"TYPED_ARRAY_SUPPORT\"in a&&!a.TYPED_ARRAY_SUPPORT,h=u.hasBuffer&&a.prototype||{};function l(){var t=f.slice();return t[196]=d(196),t[197]=p(197),t[198]=y(198),t[199]=d(199),t[200]=p(200),t[201]=y(201),t[202]=g(202,4,h.writeFloatBE||w,!0),t[203]=g(203,8,h.writeDoubleBE||m,!0),t[204]=d(204),t[205]=p(205),t[206]=y(206),t[207]=g(207,8,v),t[208]=d(208),t[209]=p(209),t[210]=y(210),t[211]=g(211,8,b),t[217]=d(217),t[218]=p(218),t[219]=y(219),t[220]=p(220),t[221]=y(221),t[222]=p(222),t[223]=y(223),t}function d(t){return function(e,r){var n=e.reserve(2),i=e.buffer;i[n++]=t,i[n]=r}}function p(t){return function(e,r){var n=e.reserve(3),i=e.buffer;i[n++]=t,i[n++]=r>>>8,i[n]=r}}function y(t){return function(e,r){var n=e.reserve(5),i=e.buffer;i[n++]=t,i[n++]=r>>>24,i[n++]=r>>>16,i[n++]=r>>>8,i[n]=r}}function g(t,e,r,n){return function(i,o){var s=i.reserve(e+1);i.buffer[s++]=t,r.call(i.buffer,o,s,n)}}function v(t,e){new o(this,e,t)}function b(t,e){new s(this,e,t)}function w(t,e){n.write(this,t,e,!1,23,4)}function m(t,e){n.write(this,t,e,!1,52,8)}e.getWriteToken=function(t){return t&&t.uint8array?function(){var t=l();return t[202]=g(202,4,w),t[203]=g(203,8,m),t}():c||u.hasBuffer&&t&&t.safe?function(){var t=f.slice();return t[196]=g(196,1,a.prototype.writeUInt8),t[197]=g(197,2,a.prototype.writeUInt16BE),t[198]=g(198,4,a.prototype.writeUInt32BE),t[199]=g(199,1,a.prototype.writeUInt8),t[200]=g(200,2,a.prototype.writeUInt16BE),t[201]=g(201,4,a.prototype.writeUInt32BE),t[202]=g(202,4,a.prototype.writeFloatBE),t[203]=g(203,8,a.prototype.writeDoubleBE),t[204]=g(204,1,a.prototype.writeUInt8),t[205]=g(205,2,a.prototype.writeUInt16BE),t[206]=g(206,4,a.prototype.writeUInt32BE),t[207]=g(207,8,v),t[208]=g(208,1,a.prototype.writeInt8),t[209]=g(209,2,a.prototype.writeInt16BE),t[210]=g(210,4,a.prototype.writeInt32BE),t[211]=g(211,8,b),t[217]=g(217,1,a.prototype.writeUInt8),t[218]=g(218,2,a.prototype.writeUInt16BE),t[219]=g(219,4,a.prototype.writeUInt32BE),t[220]=g(220,2,a.prototype.writeUInt16BE),t[221]=g(221,4,a.prototype.writeUInt32BE),t[222]=g(222,2,a.prototype.writeUInt16BE),t[223]=g(223,4,a.prototype.writeUInt32BE),t}():l()}},function(t,e,r){e.setExtUnpackers=function(t){t.addExtUnpacker(14,[f,a(Error)]),t.addExtUnpacker(1,[f,a(EvalError)]),t.addExtUnpacker(2,[f,a(RangeError)]),t.addExtUnpacker(3,[f,a(ReferenceError)]),t.addExtUnpacker(4,[f,a(SyntaxError)]),t.addExtUnpacker(5,[f,a(TypeError)]),t.addExtUnpacker(6,[f,a(URIError)]),t.addExtUnpacker(10,[f,u]),t.addExtUnpacker(11,[f,c(Boolean)]),t.addExtUnpacker(12,[f,c(String)]),t.addExtUnpacker(13,[f,c(Date)]),t.addExtUnpacker(15,[f,c(Number)]),\"undefined\"!=typeof Uint8Array&&(t.addExtUnpacker(17,c(Int8Array)),t.addExtUnpacker(18,c(Uint8Array)),t.addExtUnpacker(19,[h,c(Int16Array)]),t.addExtUnpacker(20,[h,c(Uint16Array)]),t.addExtUnpacker(21,[h,c(Int32Array)]),t.addExtUnpacker(22,[h,c(Uint32Array)]),t.addExtUnpacker(23,[h,c(Float32Array)]),\"undefined\"!=typeof Float64Array&&t.addExtUnpacker(24,[h,c(Float64Array)]),\"undefined\"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,c(Uint8ClampedArray)),t.addExtUnpacker(26,h),t.addExtUnpacker(29,[h,c(DataView)]));i.hasBuffer&&t.addExtUnpacker(27,c(o))};var n,i=r(0),o=i.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function f(t){return n||(n=r(21).decode),n(t)}function u(t){return RegExp.apply(null,t)}function a(t){return function(e){var r=new t;for(var n in s)r[n]=e[n];return r}}function c(t){return function(e){return new t(e)}}function h(t){return new Uint8Array(t).buffer}},function(t,e,r){var n=r(23);function i(t){var e,r=new Array(256);for(e=0;e<=127;e++)r[e]=o(e);for(e=128;e<=143;e++)r[e]=f(e-128,t.map);for(e=144;e<=159;e++)r[e]=f(e-144,t.array);for(e=160;e<=191;e++)r[e]=f(e-160,t.str);for(r[192]=o(null),r[193]=null,r[194]=o(!1),r[195]=o(!0),r[196]=s(t.uint8,t.bin),r[197]=s(t.uint16,t.bin),r[198]=s(t.uint32,t.bin),r[199]=s(t.uint8,t.ext),r[200]=s(t.uint16,t.ext),r[201]=s(t.uint32,t.ext),r[202]=t.float32,r[203]=t.float64,r[204]=t.uint8,r[205]=t.uint16,r[206]=t.uint32,r[207]=t.uint64,r[208]=t.int8,r[209]=t.int16,r[210]=t.int32,r[211]=t.int64,r[212]=f(1,t.ext),r[213]=f(2,t.ext),r[214]=f(4,t.ext),r[215]=f(8,t.ext),r[216]=f(16,t.ext),r[217]=s(t.uint8,t.str),r[218]=s(t.uint16,t.str),r[219]=s(t.uint32,t.str),r[220]=s(t.uint16,t.array),r[221]=s(t.uint32,t.array),r[222]=s(t.uint16,t.map),r[223]=s(t.uint32,t.map),e=224;e<=255;e++)r[e]=o(e-256);return r}function o(t){return function(){return t}}function s(t,e){return function(r){var n=t(r);return e(r,n)}}function f(t,e){return function(r){return e(r,t)}}e.getReadToken=function(t){var e=n.getReadFormat(t);return t&&t.useraw?function(t){var e,r=i(t).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],e=160;e<=191;e++)r[e]=f(e-160,t.bin);return r}(e):i(e)}},function(t,e,r){e.Encoder=o;var n=r(24),i=r(18).EncodeBuffer;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.encode=function(t){this.write(t),this.emit(\"data\",this.read())},o.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit(\"end\")}},function(t,e,r){e.Decoder=o;var n=r(24),i=r(22).DecodeBuffer;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},o.prototype.push=function(t){this.emit(\"data\",t)},o.prototype.end=function(t){this.decode(t),this.emit(\"end\")}},function(t,e,r){r(14),r(10),e.createCodec=r(5).createCodec},function(t,e,r){r(14),r(10),e.codec={preset:r(5).preset}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.createEvent=function(t,e){return{event:t,data:e}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const n=r(1);class i extends n.EventDispatcher{constructor(t,e,r){super(),this.api=t,this.id=e,this.busClientId=r,t[`on${this.id}`](t=>{this.busClientId!==t.sender&&super.emit(t.event,...t.args)})}static async acquireEstateChannel(t){const e=Math.random().toString(36),{MessageBus:r}=await t.loadAPIs([\"MessageBus\"]),n=await r.getEstateChannel();return new i(r,n.id,e)}emit(t,...e){this.api[this.id]({event:t,args:e,sender:this.busClientId}),super.emit(t,...e)}}e.MessageBusClient=i},function(t,e,r){\"use strict\";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(i=t[f])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},i=this&&this.__metadata||function(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,\"__esModule\",{value:!0});const o=r(26),s=r(48),f=r(49),u=r(25);e.defer=Promise.resolve().then.bind(Promise.resolve());let a,c=[];function h(t){t._dirty||(t._dirty=!0,1===c.push(t)&&e.defer(l))}function l(){let t;const e=c;for(c=[];t=e.pop();)t._dirty&&v(t)}function d(t){return!!t}const p=/^on[A-Z]/;function y(t){(a=t._functionMap)?a.clear():a=t._functionMap=new Map,t._component&&function t(e){if(e.attrs)for(let t in e.attrs)if(p.test(t)&&\"function\"==typeof e.attrs[t]){const r=e.attrs[t],n=f.putHandler(r);a.set(n,r),e.attrs[t]=n}if(e.children)for(let r=0;r<e.children.length;r++)t(e.children[r])}(t._component)}function g(t){if(\"string\"==typeof t)return console.error(\"Warning, you are trying to render a text\"),null;if(\"function\"==typeof t.tag){const e=t.tag;if(e.prototype&&e.prototype.render)throw new Error(\"Only function components are allowed\");return e(Object.assign({},t.attrs,{children:t.children}))}return t&&t.tag?{tag:t.tag,attrs:t.attrs,children:t.children.map(g).filter(d)}:null}function v(t,e){let r=t.props,n=t.state,i=t.prevProps||r,o=t.prevState||n,s=!1;if(!!t._component&&(t.props=i,t.state=o,!e&&t.shouldSceneUpdate&&!1===t.shouldSceneUpdate(r,n)&&(s=!0),t.props=r,t.state=n),t.prevProps=t.prevState=null,t._dirty=!1,!s){let e=t.render(r,n);\"then\"in e&&\"catch\"in e||(e=Promise.resolve(e)),e.then(g).then(async e=>{if(!e)throw new Error(\"the async render() method yielded an empty result\");t._component=e,y(t),t.sceneDidUpdate&&await t.sceneDidUpdate(i,o),await t.connectionFuture;try{await t.entityController.render(e)}catch(r){if(r.message!==u.Constants.ReplaceWholeTreeException)throw r;await t.entityController.render(e)}}).catch(t=>{console.error(t)})}}e.recursiveRender=g,e.renderScriptableScene=v;class b extends o.Script{constructor(){super(...arguments),this._dirty=!0,this._functionMap=new Map,this.prevProps=null,this.prevState=null,this._component=null,this.state={},this.connectionFuture=s.future(),this.receiveClickEvent=(t=>{const e=this._functionMap;if(e){const r=e.get(t.data.uuid);r&&r(t.data.payload)}})}setState(t){let e=this.state;this.prevState||(this.prevState=Object.assign({},e)),Object.assign(e,\"function\"==typeof t?t(e,this.props):t),h(this)}forceUpdate(){v(this,!0)}subscribeTo(t,e){this.connectionFuture.then(()=>{this.eventSubscriber.on(t,t=>{const r=e(t.data);r&&\"catch\"in r&&\"function\"==typeof r.catch&&r.catch(t=>this.emit(\"error\",t))})})}async getEthereumProvider(){const{EthereumController:t}=await this.loadAPIs([\"EthereumController\"]);return{send(e,r){if(!(e&&r&&r instanceof Function))throw new Error(\"Decentraland provider only allows async calls\");t.sendAsync(e).then(t=>r(null,t)).catch(r)},sendAsync(e,r){t.sendAsync(e).then(t=>r(null,t)).catch(r)}}}async systemDidEnable(){this.props=await this.entityController.getOwnAttributes(),this.eventSubscriber=new o.EventSubscriber(this.entityController),this.on(\"SIGKILL\",()=>{this.sceneWillUnmount&&this.sceneWillUnmount()}),this.subscribeTo(\"setAttributes\",t=>{this.prevProps=this.props,this.props=t,h(this)}),this.connectionFuture.resolve(this),v(this,!0),this.eventSubscriber.on(\"uuidEvent\",this.receiveClickEvent),this.sceneDidMount&&await this.sceneDidMount()}}n([o.inject(\"EntityController\"),i(\"design:type\",Object)],b.prototype,\"entityController\",void 0),e.ScriptableScene=b},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.future=function(){let t=t=>{throw new Error(\"Error initilizing mutex\")},e=t=>{throw t};const r=new Promise((r,n)=>{t=r,e=n});return r.then(()=>r.isPending=!1),r.catch(()=>r.isPending=!1),r.resolve=t,r.reject=e,r.isPending=!0,r}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const n=Symbol(\"id\");e.putHandler=function(t){if(t[n]){const e=t[n];if(e)return e}const e=function(){const t=[];for(let e=0;e<36;e++)t[e]=\"0123456789abcdef\".substr(Math.floor(16*Math.random()),1);return t[14]=\"4\",t[19]=\"0123456789abcdef\".substr(3&parseInt(t[19],10)|8,1),t[8]=t[13]=t[18]=t[23]=\"-\",t.join(\"\")}();return t[n]=e,e}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const n=[];e.createElement=function(t,e){let r,i,o,s=[],f=!1,u=!1;for(i=arguments.length;i-- >2;)arguments[i]&&\"string\"!=typeof arguments[i]&&n.push(arguments[i]);for(e&&null!=e.children&&(n.length||n.push(e.children),delete e.children);n.length;)if((r=n.pop())&&void 0!==r.pop)for(i=r.length;i--;)n.push(r[i]);else\"boolean\"==typeof r&&(r=null),(u=\"function\"!=(o=typeof t))&&(null==r?r=null:\"string\"!=typeof r&&(u=!1)),u&&f?s[s.length-1]+=r:r&&s.push(r),f=u;return{tag:t,attrs:e||{},children:s||[]}}}]));","extractedComments":[]}