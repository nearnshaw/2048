"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function future() {
    let resolver = (_) => {
        throw new Error('Error initilizing mutex');
    };
    let rejecter = (x) => {
        throw x;
    };
    const promise = new Promise((ok, err) => {
        resolver = ok;
        rejecter = err;
    });
    promise.then(() => (promise.isPending = false));
    promise.catch(() => (promise.isPending = false));
    promise.resolve = resolver;
    promise.reject = rejecter;
    if (!('finally' in promise)) {
        promise.finally = fn => {
            promise.then(fn);
            promise.catch(fn);
        };
    }
    promise.isPending = true;
    return promise;
}
exports.future = future;
//# sourceMappingURL=future.js.map